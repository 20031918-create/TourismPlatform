@model TourismPlatform.Models.ToursListViewModel
@{
    ViewBag.Title = "Tours";
}

<h2>Tours</h2>

<form method="get" action="@Url.Action("Index", "Tours")" style="margin-bottom:15px;">
    <input type="text" name="search" placeholder="Search tours..." value="@Model.Search" />

    <select name="category">
        <option value="">All Categories</option>
        @foreach (var c in Model.AvailableCategories)
        {
            <option value="@c" @(Model.Category == c ? "selected" : "")>@c</option>
        }
    </select>

    <select name="location">
        <option value="">All Locations</option>
        @foreach (var l in Model.AvailableLocations)
        {
            <option value="@l" @(Model.Location == l ? "selected" : "")>@l</option>
        }
    </select>

    <select name="sort">
        <option value="">Newest</option>
        <option value="price_asc" @(Model.Sort == "price_asc" ? "selected" : "")>Price: Low to High</option>
        <option value="price_desc" @(Model.Sort == "price_desc" ? "selected" : "")>Price: High to Low</option>
        <option value="rating" @(Model.Sort == "rating" ? "selected" : "")>Top Rated</option>
    </select>

    <button type="submit">Apply</button>
</form>

@if (Model.Tours == null || !Model.Tours.Any())
{
    <p>No tours found.</p>
}
else
{
    <div>
        @foreach (var t in Model.Tours)
        {
            <div style="border:1px solid #ccc; padding:12px; margin-bottom:10px;">
                <h3 style="margin:0 0 6px 0;">@t.Title</h3>
                <p style="margin:0 0 6px 0;">
                    <strong>Location:</strong> @t.Location |
                    <strong>Category:</strong> @t.Category |
                    <strong>Duration:</strong> @t.DurationHours hrs |
                    <strong>Rating:</strong> @t.Rating
                </p>
                <p style="margin:0 0 10px 0;">@t.ShortDescription</p>

                <p style="margin:0;">
                    <strong>Price:</strong> $@t.Price
                    &nbsp;|&nbsp;
                    <a href="@Url.Action("Details", "Tours", new { id = t.Id })">View details</a>
                </p>
            </div>
        }
    </div>
}
